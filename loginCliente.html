<!DOCTYPE html>
<html lang="pt-l,.br">

<head>
    
    <title>Easy Park - Login Cliente</title>

    <!-- Meta tags Obrigatórias -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/loginCliente.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link rel="shortcut icon" href="/img/logo_ep_icon (1).ico">

    <!---Icone Search--->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!---Arhivo Black 400--->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">


    <!---Abel 400--->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abel&family=Archivo+Black&display=swap" rel="stylesheet">

</head>

<header>

    <!---================================================== Barra de navegação =================================================================================--->
    
    <div class="containerX">
        <div class="navbar">
            <nav>
                <div class="botoes">
                    <div><a href="index.html" class="logo"><img src="/img/logo_ep.png" alt="Logo EasyPark"></a></div>
                    <a href="loginCliente.html" class="btn_nav">Login / Crie sua Conta</a>
                    <a href="index.html#contato" class="btn_nav">Contato</a>
                    <a href="index.html#sobrenos" class="btn_nav">Sobre nós</a>
                    <a href="chose.html" class="btn_nav">Reserva</a>
                    <form class="pesquisa">
                        <a href="#" class="user_btn"><span class="material-symbols-outlined">account_circle</span></a>
                        <div>
                            <input type="search" id="pesquisa" placeholder="Pesquisar...">
                        </div>
                        <a href="#" class=search_btn><span class="material-symbols-outlined"> search </span> </a>
                    </form>
                </div>
            </nav>
        </div>
    </div>
</header>



<body>
    <section>

        <div class="background">


            <!---================================================== Pop - Cadastro =================================================================================--->

            <div class="popup1">

                <div class="popup2">

                    <div class="containerY">


                        <form id="cadlog-btn">

                            <div class="imgcontainer">
                                <h1>Faça seu Login!</h1>
                            </div>

                            <div class="container-Popup">
                                <label for="uname"><b>E-mail</b></label>
                                <input type="text" id="email" placeholder="E-mail" name="email" required>

                                <label for="psw"><b>Senha</b></label>
                                <input type="password" id="senha" placeholder="Senha" name="senha" required>

                                <button type="submit">Login</button>
                                <label>
                                    <input type="checkbox" name="remember"> Lembre-me
                                </label>
                            </div>

                            <div class="container-Popup" style="background-color:#f1f1f1">
                                <span class="psw">Esqueceu a senha? Clique <a href="#">aqui</a></span>
                                <a href="/cadastroCliente.html"><button type="button" class="cancelbtn">Cadastre-se</button></a>
                            </div>
                        </form>


                    </div>

                </div>

            </div>

        </div>
    </section>


   <!---================================================== Scripts =================================================================================--->

   <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
   integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
   crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
   integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
   crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
   integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
   crossorigin="anonymous"></script>

<script>

   // Liga a função criaConta com o Botão de Cadastrar (submit)
   document.addEventListener('DOMContentLoaded', function () {
       const form = document.getElementById('cadlog-btn');
       form.addEventListener('submit', criaConta);
   });


   // Envia dados para o Backend  -Metodo "Post"
   async function criaConta(event) {
       event.preventDefault();

       // Variaveis
       const email = document.getElementById("email").value;
       const senha = document.getElementById("senha").value;

       // String para JSON
       const obj = {

           email: email,
           senha: senha,

       };

       // Envia o JSON para a URL correta
       const response = await fetch("http://localhost:8080/cliente/list", {
           method: 'GET',
           headers: {
               'Content-Type': 'application/json',
           },

           // Envio do JSON
           body: JSON.stringify(obj),

       });

       if (response.ok) {

           // Vai para a Pagina Inicial
           window.location.href = "http://127.0.0.1:5500/index.html";
 

       } else {

           alert("Erro ao Cadastrar");
       }

   }


        function confirmaLogin() {

            var login = document.getElementById("login").value;
            var password = document.getElementById("password").value;

            const obj = { login, password };

            const myJSON = JSON.stringify(obj);

        }

        function rememberLogin() {

            var login = document.getElementById("login").value;
            var password = document.getElementById("password").value;

            localStorage.setItem("rememberLogin", login);
            localStorage.setItem("passwordLogin", password);

        }


        // Teste
        function verificaLogin(username) {

            var myInput = document.getElementById("psw");
            var letter = document.getElementById("letter");
            var capital = document.getElementById("capital");
            var number = document.getElementById("number");
            var length = document.getElementById("length");

            // When the user clicks on the password field, show the message box
            myInput.onfocus = function () {
                document.getElementById("message").style.display = "block";
            }

            // When the user clicks outside of the password field, hide the message box
            myInput.onblur = function () {
                document.getElementById("message").style.display = "none";
            }

            // When the user starts to type something inside the password field
            myInput.onkeyup = function () {
                // Validate lowercase letters
                var lowerCaseLetters = /[a-z]/g;
                if (myInput.value.match(lowerCaseLetters)) {
                    letter.classList.remove("invalid");
                    letter.classList.add("valid");
                } else {
                    letter.classList.remove("valid");
                    letter.classList.add("invalid");
                }

                // Validate capital letters
                var upperCaseLetters = /[A-Z]/g;
                if (myInput.value.match(upperCaseLetters)) {
                    capital.classList.remove("invalid");
                    capital.classList.add("valid");
                } else {
                    capital.classList.remove("valid");
                    capital.classList.add("invalid");
                }

                // Validate numbers
                var numbers = /[0-9]/g;
                if (myInput.value.match(numbers)) {
                    number.classList.remove("invalid");
                    number.classList.add("valid");
                } else {
                    number.classList.remove("valid");
                    number.classList.add("invalid");
                }

                // Validate length
                if (myInput.value.length >= 8) {
                    length.classList.remove("invalid");
                    length.classList.add("valid");
                } else {
                    length.classList.remove("valid");
                    length.classList.add("invalid");
                }
            }


        }

    </script>

</body>

</html>